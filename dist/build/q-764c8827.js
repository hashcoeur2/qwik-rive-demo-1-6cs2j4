import{M as Rn,C as Cn,_ as Mn,u as xn,a as ve,P as Un}from"./q-1f5e9d60.js";var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function On(yt){return yt&&yt.__esModule&&Object.prototype.hasOwnProperty.call(yt,"default")?yt.default:yt}var en={exports:{}};(function(yt,Fn){(function(ye,tt){yt.exports=tt()})(Sn,function(){return(()=>{var Se=[,(H,Y,N)=>{N.r(Y),N.d(Y,{default:()=>at});var Mt=(()=>{var xt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(C){C=C||{};var h;h||(h=typeof C<"u"?C:{});var ut,Ut;h.ready=new Promise(function(e,t){ut=e,Ut=t});function Nt(){function e(f){const c=i;r=t=0,i=new Map,c.forEach(d=>{try{d(f)}catch(l){console.error(l)}}),this.La(),s&&s.fb()}let t=0,r=0,i=new Map,s=null,u=null;this.requestAnimationFrame=function(f){t||(t=requestAnimationFrame(e.bind(this)));const c=++r;return i.set(c,f),c},this.cancelAnimationFrame=function(f){i.delete(f),t&&i.size==0&&(cancelAnimationFrame(t),t=0)},this.cb=function(f){u&&(document.body.remove(u),u=null),f||(u=document.createElement("div"),u.style.backgroundColor="black",u.style.position="fixed",u.style.right=0,u.style.top=0,u.style.color="white",u.style.padding="4px",u.innerHTML="RIVE FPS",f=function(c){u.innerHTML="RIVE FPS "+c.toFixed(1)},document.body.appendChild(u)),s=new function(){let c=0,d=0;this.fb=function(){var l=performance.now();d?(++c,l-=d,1e3<l&&(f(1e3*c/l),c=d=0)):(d=l,c=0)}}},this.$a=function(){u&&(document.body.remove(u),u=null),s=null},this.La=function(){}}function et(e){console.assert(!0);const t=new Map;let r=-1/0;this.push=function(i){return i=i+((1<<e)-1)>>e,t.has(i)&&clearTimeout(t.get(i)),t.set(i,setTimeout(function(){t.delete(i),t.length==0?r=-1/0:i==r&&(r=Math.max(...t.keys()),console.assert(r<i))},1e3)),r=Math.max(i,r),r<<e}}const K=new function(){function e(){if(!t){let j=function(X,R,I){if(R=b.createShader(R),b.shaderSource(R,I),b.compileShader(R),I=b.getShaderInfoLog(R),0<I.length)throw I;b.attachShader(X,R)};var A=document.createElement("canvas"),E={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let b=A.getContext("webgl2",E);if(b)r=2;else if(b=A.getContext("webgl",E))r=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(i=Math.min(b.getParameter(b.MAX_RENDERBUFFER_SIZE),b.getParameter(b.MAX_TEXTURE_SIZE)),A=b.createProgram(),j(A,b.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),j(A,b.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),b.bindAttribLocation(A,0,"vertex"),b.bindAttribLocation(A,1,"uv"),b.linkProgram(A),E=b.getProgramInfoLog(A),0<E.length)throw E;s=b.getUniformLocation(A,"mat"),u=b.getUniformLocation(A,"translate"),b.useProgram(A),b.bindBuffer(b.ARRAY_BUFFER,b.createBuffer()),b.enableVertexAttribArray(0),b.enableVertexAttribArray(1),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,b.createBuffer()),b.uniform1i(b.getUniformLocation(A,"image"),0),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=b}return!0}let t=null,r=0,i=0,s=null,u=null,f=0,c=0;this.ob=function(){return e(),i},this.Ya=function(A){if(!e())return null;const E=t.createTexture();return t.bindTexture(t.TEXTURE_2D,E),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,A),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),r==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),E};const d=new et(8),l=new et(8),g=new et(10),P=new et(10);this.bb=function(A,E,b,j,X){if(e()){var R=d.push(A),I=l.push(E);(t.canvas.width!=R||t.canvas.height!=I)&&(t.canvas.width=R,t.canvas.height=I),t.viewport(0,I-E,A,E),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),b.sort((O,Lt)=>Lt.Oa-O.Oa),R=g.push(j),f!=R&&(t.bufferData(t.ARRAY_BUFFER,8*R,t.DYNAMIC_DRAW),f=R),R=0;for(var V of b)t.bufferSubData(t.ARRAY_BUFFER,R,V.Aa),R+=4*V.Aa.length;console.assert(R==4*j);for(var it of b)t.bufferSubData(t.ARRAY_BUFFER,R,it.Ra),R+=4*it.Ra.length;console.assert(R==8*j),R=P.push(X),c!=R&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*R,t.DYNAMIC_DRAW),c=R),V=0;for(var Ct of b)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,V,Ct.indices),V+=2*Ct.indices.length;console.assert(V==2*X),Ct=0,it=!0,R=V=0;for(const O of b){O.image.va!=Ct&&(t.bindTexture(t.TEXTURE_2D,O.image.Va||null),Ct=O.image.va),O.rb?(t.scissor(O.Ea,I-O.Fa-O.Ka,O.yb,O.Ka),it=!0):it&&(t.scissor(0,I-E,A,E),it=!1),b=2/A;const Lt=-2/E;t.uniform4f(s,O.la[0]*b*O.ra,O.la[1]*Lt*O.sa,O.la[2]*b*O.ra,O.la[3]*Lt*O.sa),t.uniform2f(u,O.la[4]*b*O.ra+b*(O.Ea-O.pb*O.ra)-1,O.la[5]*Lt*O.sa+Lt*(O.Fa-O.qb*O.sa)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,R),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,R+4*j),t.drawElements(t.TRIANGLES,O.indices.length,t.UNSIGNED_SHORT,V),R+=4*O.Aa.length,V+=2*O.indices.length}console.assert(R==4*j),console.assert(V==2*X)}},this.canvas=function(){return e()&&t.canvas}};C.onRuntimeInitialized=function(){function e(m){switch(m){case l.srcOver:return"source-over";case l.screen:return"screen";case l.overlay:return"overlay";case l.darken:return"darken";case l.lighten:return"lighten";case l.colorDodge:return"color-dodge";case l.colorBurn:return"color-burn";case l.hardLight:return"hard-light";case l.softLight:return"soft-light";case l.difference:return"difference";case l.exclusion:return"exclusion";case l.multiply:return"multiply";case l.hue:return"hue";case l.saturation:return"saturation";case l.color:return"color";case l.luminosity:return"luminosity"}}function t(m){return"rgba("+((16711680&m)>>>16)+","+((65280&m)>>>8)+","+((255&m)>>>0)+","+((4278190080&m)>>>24)/255+")"}function r(){0<V.length&&(K.bb(I.drawWidth(),I.drawHeight(),V,it,Ct),V=[],Ct=it=0,I.reset(512,512));for(const m of R){for(const _ of m.da)_();m.da=[]}R.clear()}var i=C.RenderPaintStyle;const s=C.RenderPath,u=C.RenderPaint,f=C.Renderer,c=C.StrokeCap,d=C.StrokeJoin,l=C.BlendMode,g=i.fill,P=i.stroke,A=C.FillRule.evenOdd;let E=1;var b=C.RenderImage.extend("CanvasRenderImage",{__construct:function(){this.__parent.__construct.call(this),this.va=E,E=E+1&2147483647||1},decode:function(m){let _=Ue;_.total++;var x=this,D=new Image;D.src=URL.createObjectURL(new Blob([m],{type:"image/png"})),D.onload=function(){if(x.Ta=D,x.Va=K.Ya(D),x.size(D.width,D.height),_.loaded++,_.loaded===_.total){const F=_.ready;F&&(F(),_.ready=null)}}}}),j=s.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.ga=new Path2D},reset:function(){this.ga=new Path2D},addPath:function(m,_){var x=this.ga,D=x.addPath;m=m.ga;const F=new DOMMatrix;F.a=_.xx,F.b=_.xy,F.c=_.yx,F.d=_.yy,F.e=_.tx,F.f=_.ty,D.call(x,m,F)},fillRule:function(m){this.Ca=m},moveTo:function(m,_){this.ga.moveTo(m,_)},lineTo:function(m,_){this.ga.lineTo(m,_)},cubicTo:function(m,_,x,D,F,$){this.ga.bezierCurveTo(m,_,x,D,F,$)},close:function(){this.ga.closePath()}}),X=u.extend("CanvasRenderPaint",{color:function(m){this.Da=t(m)},thickness:function(m){this.Wa=m},join:function(m){switch(m){case d.miter:this.ua="miter";break;case d.round:this.ua="round";break;case d.bevel:this.ua="bevel"}},cap:function(m){switch(m){case c.butt:this.ta="butt";break;case c.round:this.ta="round";break;case c.square:this.ta="square"}},style:function(m){this.Ua=m},blendMode:function(m){this.Sa=e(m)},linearGradient:function(m,_,x,D){this.oa={Pa:m,Qa:_,Ha:x,Ia:D,za:[]}},radialGradient:function(m,_,x,D){this.oa={Pa:m,Qa:_,Ha:x,Ia:D,za:[],mb:!0}},addStop:function(m,_){this.oa.za.push({color:m,stop:_})},completeGradient:function(){},draw:function(m,_,x){let D=this.Ua;var F=this.Da,$=this.oa;if(m.globalCompositeOperation=this.Sa,$!=null){F=$.Pa;var q=$.Qa;const mt=$.Ha;var lt=$.Ia;const ht=$.za;$.mb?($=mt-F,lt-=q,F=m.createRadialGradient(F,q,0,F,q,Math.sqrt($*$+lt*lt))):F=m.createLinearGradient(F,q,mt,lt);for(let vt=0,Q=ht.length;vt<Q;vt++)q=ht[vt],F.addColorStop(q.stop,t(q.color));this.Da=F,this.oa=null}switch(D){case P:m.strokeStyle=F,m.lineWidth=this.Wa,m.lineCap=this.ta,m.lineJoin=this.ua,m.stroke(_);break;case g:m.fillStyle=F,m.fill(_,x)}}});const R=new Set;let I=null,V=[],it=0,Ct=0;var O=C.CanvasRenderer=f.extend("Renderer",{__construct:function(m){this.__parent.__construct.call(this),this.fa=[1,0,0,1,0,0],this.Z=m.getContext("2d"),this.Ba=m,this.da=[]},save:function(){this.fa.push(...this.fa.slice(this.fa.length-6)),this.da.push(this.Z.save.bind(this.Z))},restore:function(){const m=this.fa.length-6;if(6>m)throw"restore() called without matching save().";this.fa.splice(m),this.da.push(this.Z.restore.bind(this.Z))},transform:function(m){const _=this.fa,x=_.length-6;_.splice(x,6,_[x]*m.xx+_[x+2]*m.xy,_[x+1]*m.xx+_[x+3]*m.xy,_[x]*m.yx+_[x+2]*m.yy,_[x+1]*m.yx+_[x+3]*m.yy,_[x]*m.tx+_[x+2]*m.ty+_[x+4],_[x+1]*m.tx+_[x+3]*m.ty+_[x+5]),this.da.push(this.Z.transform.bind(this.Z,m.xx,m.xy,m.yx,m.yy,m.tx,m.ty))},rotate:function(m){const _=Math.sin(m);m=Math.cos(m),this.transform({xx:m,xy:_,yx:-_,yy:m,tx:0,ty:0})},_drawPath:function(m,_){this.da.push(_.draw.bind(_,this.Z,m.ga,m.Ca===A?"evenodd":"nonzero"))},_drawImage:function(m,_,x){var D=m.Ta;if(D){var F=this.Z,$=e(_);this.da.push(function(){F.globalCompositeOperation=$,F.globalAlpha=x,F.drawImage(D,0,0),F.globalAlpha=1})}},_getMatrix:function(m){const _=this.fa,x=_.length-6;for(let D=0;6>D;++D)m[D]=_[x+D]},_drawImageMesh:function(m,_,x,D,F,$,q,lt,mt,ht){var vt=this.Z.canvas.width,Q=this.Z.canvas.height;const Ke=mt-q,Je=ht-lt;q=Math.max(q,0),lt=Math.max(lt,0),mt=Math.min(mt,vt),ht=Math.min(ht,Q);const qt=mt-q,te=ht-lt;if(console.assert(qt<=Math.min(Ke,vt)),console.assert(te<=Math.min(Je,Q)),!(0>=qt||0>=te)){mt=qt<Ke||te<Je,vt=ht=1;var Dt=Math.ceil(qt*ht),kt=Math.ceil(te*vt);Q=K.ob(),Dt>Q&&(ht*=Q/Dt,Dt=Q),kt>Q&&(vt*=Q/kt,kt=Q),I||(I=new h.DynamicRectanizer(Q),I.reset(512,512)),Q=I.addRect(Dt,kt),0>Q&&(r(),R.add(this),Q=I.addRect(Dt,kt),console.assert(0<=Q));var qe=Q&65535,tn=Q>>16;V.push({la:this.fa.slice(this.fa.length-6),image:m,Ea:qe,Fa:tn,pb:q,qb:lt,yb:Dt,Ka:kt,ra:ht,sa:vt,Aa:new Float32Array(D),Ra:new Float32Array(F),indices:new Uint16Array($),rb:mt,Oa:m.va<<1|(mt?1:0)}),it+=D.length,Ct+=$.length;var Yt=this.Z,En=e(_);this.da.push(function(){Yt.save(),Yt.resetTransform(),Yt.globalCompositeOperation=En,Yt.globalAlpha=x,Yt.drawImage(K.canvas(),qe,tn,Dt,kt,q,lt,qt,te),Yt.restore()})}},_clipPath:function(m){this.da.push(this.Z.clip.bind(this.Z,m.ga,m.Ca===A?"evenodd":"nonzero"))},clear:function(){R.add(this),this.da.push(this.Z.clearRect.bind(this.Z,0,0,this.Ba.width,this.Ba.height))},flush:function(){},translate:function(m,_){this.transform({xx:1,xy:0,yx:0,yy:1,tx:m,ty:_})}});C.makeRenderer=function(m){return new O(m)},C.renderFactory={makeRenderPaint:function(){return new X},makeRenderPath:function(){return new j},makeRenderImage:function(){return new b}};let Lt=C.load,Ue=null;C.load=function(m){return new Promise(function(_){let x=null;Ue={total:0,loaded:0,ready:function(){_(x)}},x=Lt(m),Ue.total==0&&_(x)})},i=new Nt,C.requestAnimationFrame=i.requestAnimationFrame.bind(i),C.cancelAnimationFrame=i.cancelAnimationFrame.bind(i),C.enableFPSCounter=i.cb.bind(i),C.disableFPSCounter=i.$a,i.La=r,C.cleanup=function(){I&&I.delete()}};var gt=Object.assign({},h),bt=typeof window=="object",S=typeof importScripts=="function",Z="",St,wt;(bt||S)&&(S?Z=self.location.href:typeof document<"u"&&document.currentScript&&(Z=document.currentScript.src),xt&&(Z=xt),Z.indexOf("blob:")!==0?Z=Z.substr(0,Z.replace(/[?#].*/,"").lastIndexOf("/")+1):Z="",S&&(wt=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),St=(e,t,r)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?t(i.response):r()},i.onerror=r,i.send(null)});var zt=h.print||console.log.bind(console),ct=h.printErr||console.warn.bind(console);Object.assign(h,gt),gt=null;var z;h.wasmBinary&&(z=h.wasmBinary),h.noExitRuntime,typeof WebAssembly!="object"&&Zt("no native wasm support detected");var Pt,o=!1,n=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function a(e,t,r){var i=t+r;for(r=t;e[r]&&!(r>=i);)++r;if(16<r-t&&e.buffer&&n)return n.decode(e.subarray(t,r));for(i="";t<r;){var s=e[t++];if(s&128){var u=e[t++]&63;if((s&224)==192)i+=String.fromCharCode((s&31)<<6|u);else{var f=e[t++]&63;s=(s&240)==224?(s&15)<<12|u<<6|f:(s&7)<<18|u<<12|f<<6|e[t++]&63,65536>s?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else i+=String.fromCharCode(s)}return i}var p,y,v,w,U,L,T,W,G;function ot(){var e=Pt.buffer;p=e,h.HEAP8=y=new Int8Array(e),h.HEAP16=w=new Int16Array(e),h.HEAP32=L=new Int32Array(e),h.HEAPU8=v=new Uint8Array(e),h.HEAPU16=U=new Uint16Array(e),h.HEAPU32=T=new Uint32Array(e),h.HEAPF32=W=new Float32Array(e),h.HEAPF64=G=new Float64Array(e)}var k,dt=[],nt=[],Ft=[];function nn(){var e=h.preRun.shift();dt.unshift(e)}var Wt=0,Ht=null;function Zt(e){throw h.onAbort&&h.onAbort(e),e="Aborted("+e+")",ct(e),o=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),Ut(e),e}function Oe(){return st.startsWith("data:application/octet-stream;base64,")}var st;if(st="canvas_advanced.wasm",!Oe()){var Ie=st;st=h.locateFile?h.locateFile(Ie,Z):Z+Ie}function Le(){var e=st;try{if(e==st&&z)return new Uint8Array(z);if(wt)return wt(e);throw"both async and sync fetching of the wasm failed"}catch(t){Zt(t)}}function rn(){if(!z&&(bt||S)){if(typeof fetch=="function"&&!st.startsWith("file://"))return fetch(st,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+st+"'";return e.arrayBuffer()}).catch(function(){return Le()});if(St)return new Promise(function(e,t){St(st,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return Le()})}function be(e){for(;0<e.length;)e.shift()(h)}function Fe(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function ee(e,t){return e=Fe(e),function(){return t.apply(this,arguments)}}var ft=[{},{value:void 0},{value:null},{value:!0},{value:!1}],we=[];function ne(e){var t=Error,r=ee(e,function(i){this.name=e,this.message=i,i=Error(i).stack,i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},r}var Bt=void 0;function M(e){throw new Bt(e)}var Ot=e=>(e||M("Cannot use deleted val. handle = "+e),ft[e].value),_t=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=we.length?we.pop():ft.length;return ft[t]={ya:1,value:e},t}},We=void 0,je=void 0;function B(e){for(var t="";v[e];)t+=je[v[e++]];return t}var Qt=[];function Pe(){for(;Qt.length;){var e=Qt.pop();e.U.ka=!1,e.delete()}}var Gt=void 0,Tt={};function _e(e,t){for(t===void 0&&M("ptr should not be undefined");e.$;)t=e.na(t),e=e.$;return t}var jt={};function De(e){e=Ge(e);var t=B(e);return Rt(e),t}function $t(e,t){var r=jt[e];return r===void 0&&M(t+" has unknown type "+De(e)),r}function re(){}var Te=!1;function ke(e){--e.count.value,e.count.value===0&&(e.aa?e.ca.ha(e.aa):e.X.V.ha(e.W))}function Be(e,t,r){return t===r?e:r.$===void 0?null:(e=Be(e,t,r.$),e===null?null:r.ab(e))}var Xe={};function an(e,t){return t=_e(e,t),Tt[t]}var Ve=void 0;function ie(e){throw new Ve(e)}function ae(e,t){return t.X&&t.W||ie("makeClassHandle requires ptr and ptrType"),!!t.ca!=!!t.aa&&ie("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Xt(Object.create(e,{U:{value:t}}))}function Xt(e){return typeof FinalizationRegistry>"u"?(Xt=t=>t,e):(Te=new FinalizationRegistry(t=>{ke(t.U)}),Xt=t=>{var r=t.U;return r.aa&&Te.register(t,{U:r},t),t},re=t=>{Te.unregister(t)},Xt(e))}var oe={};function Kt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Jt(e){return this.fromWireType(L[e>>2])}var Vt={},se={};function rt(e,t,r){function i(c){c=r(c),c.length!==e.length&&ie("Mismatched type converter count");for(var d=0;d<e.length;++d)pt(e[d],c[d])}e.forEach(function(c){se[c]=t});var s=Array(t.length),u=[],f=0;t.forEach((c,d)=>{jt.hasOwnProperty(c)?s[d]=jt[c]:(u.push(c),Vt.hasOwnProperty(c)||(Vt[c]=[]),Vt[c].push(()=>{s[d]=jt[c],++f,f===u.length&&i(s)}))}),u.length===0&&i(s)}function ue(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function pt(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||M('type "'+i+'" must have a positive integer typeid pointer'),jt.hasOwnProperty(e)){if(r.lb)return;M("Cannot register type '"+i+"' twice")}jt[e]=t,delete se[e],Vt.hasOwnProperty(e)&&(t=Vt[e],delete Vt[e],t.forEach(s=>s()))}function Ae(e){M(e.U.X.V.name+" instance already deleted")}function It(){}function Ee(e,t,r){if(e[t].Y===void 0){var i=e[t];e[t]=function(){return e[t].Y.hasOwnProperty(arguments.length)||M("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].Y+")!"),e[t].Y[arguments.length].apply(this,arguments)},e[t].Y=[],e[t].Y[i.ja]=i}}function Re(e,t,r){h.hasOwnProperty(e)?((r===void 0||h[e].Y!==void 0&&h[e].Y[r]!==void 0)&&M("Cannot register public name '"+e+"' twice"),Ee(h,e,e),h.hasOwnProperty(r)&&M("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),h[e].Y[r]=t):(h[e]=t,r!==void 0&&(h[e].zb=r))}function on(e,t,r,i,s,u,f,c){this.name=e,this.constructor=t,this.ea=r,this.ha=i,this.$=s,this.gb=u,this.na=f,this.ab=c,this.Ma=[]}function ce(e,t,r){for(;t!==r;)t.na||M("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.na(e),t=t.$;return e}function sn(e,t){return t===null?(this.wa&&M("null is not a valid "+this.name),0):(t.U||M('Cannot pass "'+Me(t)+'" as a '+this.name),t.U.W||M("Cannot pass deleted object as a pointer of type "+this.name),ce(t.U.W,t.U.X.V,this.V))}function un(e,t){if(t===null){if(this.wa&&M("null is not a valid "+this.name),this.qa){var r=this.xa();return e!==null&&e.push(this.ha,r),r}return 0}if(t.U||M('Cannot pass "'+Me(t)+'" as a '+this.name),t.U.W||M("Cannot pass deleted object as a pointer of type "+this.name),!this.pa&&t.U.X.pa&&M("Cannot convert argument of type "+(t.U.ca?t.U.ca.name:t.U.X.name)+" to parameter type "+this.name),r=ce(t.U.W,t.U.X.V,this.V),this.qa)switch(t.U.aa===void 0&&M("Passing raw pointer to smart pointer is illegal"),this.xb){case 0:t.U.ca===this?r=t.U.aa:M("Cannot convert argument of type "+(t.U.ca?t.U.ca.name:t.U.X.name)+" to parameter type "+this.name);break;case 1:r=t.U.aa;break;case 2:if(t.U.ca===this)r=t.U.aa;else{var i=t.clone();r=this.tb(r,_t(function(){i.delete()})),e!==null&&e.push(this.ha,r)}break;default:M("Unsupporting sharing policy")}return r}function cn(e,t){return t===null?(this.wa&&M("null is not a valid "+this.name),0):(t.U||M('Cannot pass "'+Me(t)+'" as a '+this.name),t.U.W||M("Cannot pass deleted object as a pointer of type "+this.name),t.U.X.pa&&M("Cannot convert argument of type "+t.U.X.name+" to parameter type "+this.name),ce(t.U.W,t.U.X.V,this.V))}function At(e,t,r,i){this.name=e,this.V=t,this.wa=r,this.pa=i,this.qa=!1,this.ha=this.tb=this.xa=this.Na=this.xb=this.sb=void 0,t.$!==void 0?this.toWireType=un:(this.toWireType=i?sn:cn,this.ba=null)}function Ye(e,t,r){h.hasOwnProperty(e)||ie("Replacing nonexistant public symbol"),h[e].Y!==void 0&&r!==void 0?h[e].Y[r]=t:(h[e]=t,h[e].ja=r)}function fn(e,t){var r=[];return function(){if(r.length=0,Object.assign(r,arguments),e.includes("j")){var i=h["dynCall_"+e];i=r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)}else i=k.get(t).apply(null,r);return i}}function J(e,t){e=B(e);var r=e.includes("j")?fn(e,t):k.get(t);return typeof r!="function"&&M("unknown function pointer with signature "+e+": "+t),r}var Ne=void 0;function Et(e,t){function r(u){s[u]||jt[u]||(se[u]?se[u].forEach(r):(i.push(u),s[u]=!0))}var i=[],s={};throw t.forEach(r),new Ne(e+": "+i.map(De).join([", "]))}function fe(e,t,r,i,s){var u=t.length;2>u&&M("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&r!==null,c=!1;for(r=1;r<t.length;++r)if(t[r]!==null&&t[r].ba===void 0){c=!0;break}var d=t[0].name!=="void",l=u-2,g=Array(l),P=[],A=[];return function(){if(arguments.length!==l&&M("function "+e+" called with "+arguments.length+" arguments, expected "+l+" args!"),A.length=0,P.length=f?2:1,P[0]=s,f){var E=t[1].toWireType(A,this);P[1]=E}for(var b=0;b<l;++b)g[b]=t[b+2].toWireType(A,arguments[b]),P.push(g[b]);if(b=i.apply(null,P),c)Kt(A);else for(var j=f?1:2;j<t.length;j++){var X=j===1?E:g[j-2];t[j].ba!==null&&t[j].ba(X)}return E=d?t[0].fromWireType(b):void 0,E}}function le(e,t){for(var r=[],i=0;i<e;i++)r.push(T[t+4*i>>2]);return r}function ze(e,t,r){return e instanceof Object||M(r+' with invalid "this": '+e),e instanceof t.V.constructor||M(r+' incompatible with "this" of type '+e.constructor.name),e.U.W||M("cannot call emscripten binding method "+r+" on deleted object"),ce(e.U.W,e.U.X.V,t.V)}function Ce(e){4<e&&--ft[e].ya===0&&(ft[e]=void 0,we.push(e))}function ln(e,t,r){switch(t){case 0:return function(i){return this.fromWireType((r?y:v)[i])};case 1:return function(i){return this.fromWireType((r?w:U)[i>>1])};case 2:return function(i){return this.fromWireType((r?L:T)[i>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Me(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function hn(e,t){switch(t){case 2:return function(r){return this.fromWireType(W[r>>2])};case 3:return function(r){return this.fromWireType(G[r>>3])};default:throw new TypeError("Unknown float type: "+e)}}function dn(e,t,r){switch(t){case 0:return r?function(i){return y[i]}:function(i){return v[i]};case 1:return r?function(i){return w[i>>1]}:function(i){return U[i>>1]};case 2:return r?function(i){return L[i>>2]}:function(i){return T[i>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var He=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function pn(e,t){for(var r=e>>1,i=r+t/2;!(r>=i)&&U[r];)++r;if(r<<=1,32<r-e&&He)return He.decode(v.subarray(e,r));for(r="",i=0;!(i>=t/2);++i){var s=w[e+2*i>>1];if(s==0)break;r+=String.fromCharCode(s)}return r}function mn(e,t,r){if(r===void 0&&(r=2147483647),2>r)return 0;r-=2;var i=t;r=r<2*e.length?r/2:e.length;for(var s=0;s<r;++s)w[t>>1]=e.charCodeAt(s),t+=2;return w[t>>1]=0,t-i}function vn(e){return 2*e.length}function yn(e,t){for(var r=0,i="";!(r>=t/4);){var s=L[e+4*r>>2];if(s==0)break;++r,65536<=s?(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023)):i+=String.fromCharCode(s)}return i}function gn(e,t,r){if(r===void 0&&(r=2147483647),4>r)return 0;var i=t;r=i+r-4;for(var s=0;s<e.length;++s){var u=e.charCodeAt(s);if(55296<=u&&57343>=u){var f=e.charCodeAt(++s);u=65536+((u&1023)<<10)|f&1023}if(L[t>>2]=u,t+=4,t+4>r)break}return L[t>>2]=0,t-i}function bn(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);55296<=i&&57343>=i&&++r,t+=4}return t}var wn={};function he(e){var t=wn[e];return t===void 0?B(e):t}var de=[];function Pn(e){var t=de.length;return de.push(e),t}function _n(e,t){for(var r=Array(e),i=0;i<e;++i)r[i]=$t(T[t+4*i>>2],"parameter "+i);return r}var Ze=[],Tn=[null,[],[]];Bt=h.BindingError=ne("BindingError"),h.count_emval_handles=function(){for(var e=0,t=5;t<ft.length;++t)ft[t]!==void 0&&++e;return e},h.get_first_emval=function(){for(var e=5;e<ft.length;++e)if(ft[e]!==void 0)return ft[e];return null},We=h.PureVirtualError=ne("PureVirtualError");for(var Qe=Array(256),pe=0;256>pe;++pe)Qe[pe]=String.fromCharCode(pe);je=Qe,h.getInheritedInstanceCount=function(){return Object.keys(Tt).length},h.getLiveInheritedInstances=function(){var e=[],t;for(t in Tt)Tt.hasOwnProperty(t)&&e.push(Tt[t]);return e},h.flushPendingDeletes=Pe,h.setDelayFunction=function(e){Gt=e,Qt.length&&Gt&&Gt(Pe)},Ve=h.InternalError=ne("InternalError"),It.prototype.isAliasOf=function(e){if(!(this instanceof It&&e instanceof It))return!1;var t=this.U.X.V,r=this.U.W,i=e.U.X.V;for(e=e.U.W;t.$;)r=t.na(r),t=t.$;for(;i.$;)e=i.na(e),i=i.$;return t===i&&r===e},It.prototype.clone=function(){if(this.U.W||Ae(this),this.U.ma)return this.U.count.value+=1,this;var e=Xt,t=Object,r=t.create,i=Object.getPrototypeOf(this),s=this.U;return e=e(r.call(t,i,{U:{value:{count:s.count,ka:s.ka,ma:s.ma,W:s.W,X:s.X,aa:s.aa,ca:s.ca}}})),e.U.count.value+=1,e.U.ka=!1,e},It.prototype.delete=function(){this.U.W||Ae(this),this.U.ka&&!this.U.ma&&M("Object already scheduled for deletion"),re(this),ke(this.U),this.U.ma||(this.U.aa=void 0,this.U.W=void 0)},It.prototype.isDeleted=function(){return!this.U.W},It.prototype.deleteLater=function(){return this.U.W||Ae(this),this.U.ka&&!this.U.ma&&M("Object already scheduled for deletion"),Qt.push(this),Qt.length===1&&Gt&&Gt(Pe),this.U.ka=!0,this},At.prototype.hb=function(e){return this.Na&&(e=this.Na(e)),e},At.prototype.Ga=function(e){this.ha&&this.ha(e)},At.prototype.argPackAdvance=8,At.prototype.readValueFromPointer=Jt,At.prototype.deleteObject=function(e){e!==null&&e.delete()},At.prototype.fromWireType=function(e){function t(){return this.qa?ae(this.V.ea,{X:this.sb,W:r,ca:this,aa:e}):ae(this.V.ea,{X:this,W:e})}var r=this.hb(e);if(!r)return this.Ga(e),null;var i=an(this.V,r);if(i!==void 0)return i.U.count.value===0?(i.U.W=r,i.U.aa=e,i.clone()):(i=i.clone(),this.Ga(e),i);if(i=this.V.gb(r),i=Xe[i],!i)return t.call(this);i=this.pa?i.Xa:i.pointerType;var s=Be(r,this.V,i.V);return s===null?t.call(this):this.qa?ae(i.V.ea,{X:i,W:s,ca:this,aa:e}):ae(i.V.ea,{X:i,W:s})},Ne=h.UnboundTypeError=ne("UnboundTypeError");var An={l:function(e,t,r){e=B(e),t=$t(t,"wrapper"),r=Ot(r);var i=[].slice,s=t.V,u=s.ea,f=s.$.ea,c=s.$.constructor;e=ee(e,function(){s.$.Ma.forEach(function(l){if(this[l]===f[l])throw new We("Pure virtual function "+l+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:u}),this.__construct.apply(this,i.call(arguments))}),u.__construct=function(){this===u&&M("Pass correct 'this' to __construct");var l=c.implement.apply(void 0,[this].concat(i.call(arguments)));re(l);var g=l.U;l.notifyOnDestruction(),g.ma=!0,Object.defineProperties(this,{U:{value:g}}),Xt(this),l=g.W,l=_e(s,l),Tt.hasOwnProperty(l)?M("Tried to register registered instance: "+l):Tt[l]=this},u.__destruct=function(){this===u&&M("Pass correct 'this' to __destruct"),re(this);var l=this.U.W;l=_e(s,l),Tt.hasOwnProperty(l)?delete Tt[l]:M("Tried to unregister unregistered instance: "+l)},e.prototype=Object.create(u);for(var d in r)e.prototype[d]=r[d];return _t(e)},I:function(e){var t=oe[e];delete oe[e];var r=t.xa,i=t.ha,s=t.Ja,u=s.map(f=>f.kb).concat(s.map(f=>f.vb));rt([e],u,f=>{var c={};return s.forEach((d,l)=>{var g=f[l],P=d.ib,A=d.jb,E=f[l+s.length],b=d.ub,j=d.wb;c[d.eb]={read:X=>g.fromWireType(P(A,X)),write:(X,R)=>{var I=[];b(j,X,E.toWireType(I,R)),Kt(I)}}}),[{name:t.name,fromWireType:function(d){var l={},g;for(g in c)l[g]=c[g].read(d);return i(d),l},toWireType:function(d,l){for(var g in c)if(!(g in l))throw new TypeError('Missing field:  "'+g+'"');var P=r();for(g in c)c[g].write(P,l[g]);return d!==null&&d.push(i,P),P},argPackAdvance:8,readValueFromPointer:Jt,ba:i}]})},x:function(){},B:function(e,t,r,i,s){var u=ue(r);t=B(t),pt(e,{name:t,fromWireType:function(f){return!!f},toWireType:function(f,c){return c?i:s},argPackAdvance:8,readValueFromPointer:function(f){if(r===1)var c=y;else if(r===2)c=w;else if(r===4)c=L;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(c[f>>u])},ba:null})},c:function(e,t,r,i,s,u,f,c,d,l,g,P,A){g=B(g),u=J(s,u),c&&(c=J(f,c)),l&&(l=J(d,l)),A=J(P,A);var E=Fe(g);Re(E,function(){Et("Cannot construct "+g+" due to unbound types",[i])}),rt([e,t,r],i?[i]:[],function(b){if(b=b[0],i)var j=b.V,X=j.ea;else X=It.prototype;b=ee(E,function(){if(Object.getPrototypeOf(this)!==R)throw new Bt("Use 'new' to construct "+g);if(I.ia===void 0)throw new Bt(g+" has no accessible constructor");var it=I.ia[arguments.length];if(it===void 0)throw new Bt("Tried to invoke ctor of "+g+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(I.ia).toString()+") parameters instead!");return it.apply(this,arguments)});var R=Object.create(X,{constructor:{value:b}});b.prototype=R;var I=new on(g,b,R,A,j,u,c,l);j=new At(g,I,!0,!1),X=new At(g+"*",I,!1,!1);var V=new At(g+" const*",I,!1,!0);return Xe[e]={pointerType:X,Xa:V},Ye(E,b),[j,X,V]})},h:function(e,t,r,i,s,u,f){var c=le(r,i);t=B(t),u=J(s,u),rt([],[e],function(d){function l(){Et("Cannot call "+g+" due to unbound types",c)}d=d[0];var g=d.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var P=d.V.constructor;return P[t]===void 0?(l.ja=r-1,P[t]=l):(Ee(P,t,g),P[t].Y[r-1]=l),rt([],c,function(A){return A=fe(g,[A[0],null].concat(A.slice(1)),null,u,f),P[t].Y===void 0?(A.ja=r-1,P[t]=A):P[t].Y[r-1]=A,[]}),[]})},n:function(e,t,r,i,s,u,f,c){t=B(t),u=J(s,u),rt([],[e],function(d){d=d[0];var l=d.name+"."+t,g={get:function(){Et("Cannot access "+l+" due to unbound types",[r])},enumerable:!0,configurable:!0};return g.set=c?()=>{Et("Cannot access "+l+" due to unbound types",[r])}:()=>{M(l+" is a read-only property")},Object.defineProperty(d.V.constructor,t,g),rt([],[r],function(P){P=P[0];var A={get:function(){return P.fromWireType(u(i))},enumerable:!0};return c&&(c=J(f,c),A.set=E=>{var b=[];c(i,P.toWireType(b,E)),Kt(b)}),Object.defineProperty(d.V.constructor,t,A),[]}),[]})},k:function(e,t,r,i,s,u){0<t||Zt();var f=le(t,r);s=J(i,s),rt([],[e],function(c){c=c[0];var d="constructor "+c.name;if(c.V.ia===void 0&&(c.V.ia=[]),c.V.ia[t-1]!==void 0)throw new Bt("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+c.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return c.V.ia[t-1]=()=>{Et("Cannot construct "+c.name+" due to unbound types",f)},rt([],f,function(l){return l.splice(1,0,null),c.V.ia[t-1]=fe(d,l,null,s,u),[]}),[]})},a:function(e,t,r,i,s,u,f,c){var d=le(r,i);t=B(t),u=J(s,u),rt([],[e],function(l){function g(){Et("Cannot call "+P+" due to unbound types",d)}l=l[0];var P=l.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),c&&l.V.Ma.push(t);var A=l.V.ea,E=A[t];return E===void 0||E.Y===void 0&&E.className!==l.name&&E.ja===r-2?(g.ja=r-2,g.className=l.name,A[t]=g):(Ee(A,t,P),A[t].Y[r-2]=g),rt([],d,function(b){return b=fe(P,b,l,u,f),A[t].Y===void 0?(b.ja=r-2,A[t]=b):A[t].Y[r-2]=b,[]}),[]})},b:function(e,t,r,i,s,u,f,c,d,l){t=B(t),s=J(i,s),rt([],[e],function(g){g=g[0];var P=g.name+"."+t,A={get:function(){Et("Cannot access "+P+" due to unbound types",[r,f])},enumerable:!0,configurable:!0};return A.set=d?()=>{Et("Cannot access "+P+" due to unbound types",[r,f])}:()=>{M(P+" is a read-only property")},Object.defineProperty(g.V.ea,t,A),rt([],d?[r,f]:[r],function(E){var b=E[0],j={get:function(){var R=ze(this,g,P+" getter");return b.fromWireType(s(u,R))},enumerable:!0};if(d){d=J(c,d);var X=E[1];j.set=function(R){var I=ze(this,g,P+" setter"),V=[];d(l,I,X.toWireType(V,R)),Kt(V)}}return Object.defineProperty(g.V.ea,t,j),[]}),[]})},A:function(e,t){t=B(t),pt(e,{name:t,fromWireType:function(r){var i=Ot(r);return Ce(r),i},toWireType:function(r,i){return _t(i)},argPackAdvance:8,readValueFromPointer:Jt,ba:null})},j:function(e,t,r,i){function s(){}r=ue(r),t=B(t),s.values={},pt(e,{name:t,constructor:s,fromWireType:function(u){return this.constructor.values[u]},toWireType:function(u,f){return f.value},argPackAdvance:8,readValueFromPointer:ln(t,r,i),ba:null}),Re(t,s)},i:function(e,t,r){var i=$t(e,"enum");t=B(t),e=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:ee(i.name+"_"+t,function(){})}}),e.values[r]=i,e[t]=i},r:function(e,t,r){r=ue(r),t=B(t),pt(e,{name:t,fromWireType:function(i){return i},toWireType:function(i,s){return s},argPackAdvance:8,readValueFromPointer:hn(t,r),ba:null})},q:function(e,t,r,i,s,u){var f=le(t,r);e=B(e),s=J(i,s),Re(e,function(){Et("Cannot call "+e+" due to unbound types",f)},t-1),rt([],f,function(c){return Ye(e,fe(e,[c[0],null].concat(c.slice(1)),null,s,u),t-1),[]})},g:function(e,t,r,i,s){t=B(t),s===-1&&(s=4294967295),s=ue(r);var u=c=>c;if(i===0){var f=32-8*r;u=c=>c<<f>>>f}r=t.includes("unsigned")?function(c,d){return d>>>0}:function(c,d){return d},pt(e,{name:t,fromWireType:u,toWireType:r,argPackAdvance:8,readValueFromPointer:dn(t,s,i!==0),ba:null})},d:function(e,t,r){function i(u){u>>=2;var f=T;return new s(p,f[u+1],f[u])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];r=B(r),pt(e,{name:r,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{lb:!0})},s:function(e,t){t=B(t);var r=t==="std::string";pt(e,{name:t,fromWireType:function(i){var s=T[i>>2],u=i+4;if(r)for(var f=u,c=0;c<=s;++c){var d=u+c;if(c==s||v[d]==0){if(f=f?a(v,f,d-f):"",l===void 0)var l=f;else l+=String.fromCharCode(0),l+=f;f=d+1}}else{for(l=Array(s),c=0;c<s;++c)l[c]=String.fromCharCode(v[u+c]);l=l.join("")}return Rt(i),l},toWireType:function(i,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var u,f=typeof s=="string";f||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||M("Cannot pass non-string to std::string");var c;if(r&&f)for(u=c=0;u<s.length;++u){var d=s.charCodeAt(u);127>=d?c++:2047>=d?c+=2:55296<=d&&57343>=d?(c+=4,++u):c+=3}else c=s.length;if(u=c,c=xe(4+u+1),d=c+4,T[c>>2]=u,r&&f){if(f=d,d=u+1,u=v,0<d){d=f+d-1;for(var l=0;l<s.length;++l){var g=s.charCodeAt(l);if(55296<=g&&57343>=g){var P=s.charCodeAt(++l);g=65536+((g&1023)<<10)|P&1023}if(127>=g){if(f>=d)break;u[f++]=g}else{if(2047>=g){if(f+1>=d)break;u[f++]=192|g>>6}else{if(65535>=g){if(f+2>=d)break;u[f++]=224|g>>12}else{if(f+3>=d)break;u[f++]=240|g>>18,u[f++]=128|g>>12&63}u[f++]=128|g>>6&63}u[f++]=128|g&63}}u[f]=0}}else if(f)for(f=0;f<u;++f)l=s.charCodeAt(f),255<l&&(Rt(d),M("String has UTF-16 code units that do not fit in 8 bits")),v[d+f]=l;else for(f=0;f<u;++f)v[d+f]=s[f];return i!==null&&i.push(Rt,c),c},argPackAdvance:8,readValueFromPointer:Jt,ba:function(i){Rt(i)}})},p:function(e,t,r){if(r=B(r),t===2)var i=pn,s=mn,u=vn,f=()=>U,c=1;else t===4&&(i=yn,s=gn,u=bn,f=()=>T,c=2);pt(e,{name:r,fromWireType:function(d){for(var l=T[d>>2],g=f(),P,A=d+4,E=0;E<=l;++E){var b=d+4+E*t;(E==l||g[b>>c]==0)&&(A=i(A,b-A),P===void 0?P=A:(P+=String.fromCharCode(0),P+=A),A=b+t)}return Rt(d),P},toWireType:function(d,l){typeof l!="string"&&M("Cannot pass non-string to C++ string type "+r);var g=u(l),P=xe(4+g+t);return T[P>>2]=g>>c,s(l,P+4,g+t),d!==null&&d.push(Rt,P),P},argPackAdvance:8,readValueFromPointer:Jt,ba:function(d){Rt(d)}})},K:function(e,t,r,i,s,u){oe[e]={name:B(t),xa:J(r,i),ha:J(s,u),Ja:[]}},J:function(e,t,r,i,s,u,f,c,d,l){oe[e].Ja.push({eb:B(t),kb:r,ib:J(i,s),jb:u,vb:f,ub:J(c,d),wb:l})},C:function(e,t){t=B(t),pt(e,{nb:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},m:function(e,t,r){e=Ot(e),t=$t(t,"emval::as");var i=[],s=_t(i);return T[r>>2]=s,t.toWireType(i,e)},t:function(e,t,r,i,s){e=de[e],t=Ot(t),r=he(r);var u=[];return T[i>>2]=_t(u),e(t,r,u,s)},f:function(e,t,r,i){e=de[e],t=Ot(t),r=he(r),e(t,r,null,i)},L:Ce,e:function(e,t){var r=_n(e,t),i=r[0];t=i.name+"_$"+r.slice(1).map(function(f){return f.name}).join("_")+"$";var s=Ze[t];if(s!==void 0)return s;var u=Array(e-1);return s=Pn((f,c,d,l)=>{for(var g=0,P=0;P<e-1;++P)u[P]=r[P+1].readValueFromPointer(l+g),g+=r[P+1].argPackAdvance;for(f=f[c].apply(f,u),P=0;P<e-1;++P)r[P+1].Za&&r[P+1].Za(u[P]);if(!i.nb)return i.toWireType(d,f)}),Ze[t]=s},D:function(e){return e=he(e),_t(h[e])},H:function(e,t){return e=Ot(e),t=Ot(t),_t(e[t])},E:function(e){4<e&&(ft[e].ya+=1)},G:function(e){return _t(he(e))},F:function(e){var t=Ot(e);Kt(t),Ce(e)},u:function(e,t){return e=$t(e,"_emval_take_value"),e=e.readValueFromPointer(t),_t(e)},v:function(){Zt("")},o:function(e){var t=v.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var s=Math;i=Math.max(e,i),s=s.min.call(s,2147483648,i+(65536-i%65536)%65536);t:{try{Pt.grow(s-p.byteLength+65535>>>16),ot();var u=1;break t}catch{}u=void 0}if(u)return!0}return!1},z:function(){return 52},w:function(){return 70},y:function(e,t,r,i){for(var s=0,u=0;u<r;u++){var f=T[t>>2],c=T[t+4>>2];t+=8;for(var d=0;d<c;d++){var l=v[f+d],g=Tn[e];l===0||l===10?((e===1?zt:ct)(a(g,0)),g.length=0):g.push(l)}s+=c}return T[i>>2]=s,0}};(function(){function e(s){h.asm=s.exports,Pt=h.asm.M,ot(),k=h.asm.S,nt.unshift(h.asm.N),Wt--,h.monitorRunDependencies&&h.monitorRunDependencies(Wt),Wt==0&&Ht&&(s=Ht,Ht=null,s())}function t(s){e(s.instance)}function r(s){return rn().then(function(u){return WebAssembly.instantiate(u,i)}).then(function(u){return u}).then(s,function(u){ct("failed to asynchronously prepare wasm: "+u),Zt(u)})}var i={a:An};if(Wt++,h.monitorRunDependencies&&h.monitorRunDependencies(Wt),h.instantiateWasm)try{return h.instantiateWasm(i,e)}catch(s){return ct("Module.instantiateWasm callback failed with error: "+s),!1}return function(){return z||typeof WebAssembly.instantiateStreaming!="function"||Oe()||st.startsWith("file://")||typeof fetch!="function"?r(t):fetch(st,{credentials:"same-origin"}).then(function(s){return WebAssembly.instantiateStreaming(s,i).then(t,function(u){return ct("wasm streaming compile failed: "+u),ct("falling back to ArrayBuffer instantiation"),r(t)})})}().catch(Ut),{}})(),h.___wasm_call_ctors=function(){return(h.___wasm_call_ctors=h.asm.N).apply(null,arguments)};var Rt=h._free=function(){return(Rt=h._free=h.asm.O).apply(null,arguments)},xe=h._malloc=function(){return(xe=h._malloc=h.asm.P).apply(null,arguments)},Ge=h.___getTypeName=function(){return(Ge=h.___getTypeName=h.asm.Q).apply(null,arguments)};h.__embind_initialize_bindings=function(){return(h.__embind_initialize_bindings=h.asm.R).apply(null,arguments)},h.dynCall_jiji=function(){return(h.dynCall_jiji=h.asm.T).apply(null,arguments)};var me;Ht=function e(){me||$e(),me||(Ht=e)};function $e(){function e(){if(!me&&(me=!0,h.calledRun=!0,!o)){if(be(nt),ut(h),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var t=h.postRun.shift();Ft.unshift(t)}be(Ft)}}if(!(0<Wt)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)nn();be(dt),0<Wt||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),e()},1)):e())}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return $e(),C.ready}})();const at=Mt},H=>{H.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"1.0.92","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(H,Y,N)=>{N.r(Y),N.d(Y,{registerTouchInteractions:()=>Mt.registerTouchInteractions});var Mt=N(4)},(H,Y,N)=>{N.r(Y),N.d(Y,{registerTouchInteractions:()=>Mt});const Mt=({canvas:at,artboard:xt,stateMachines:C=[],renderer:h,rive:ut,fit:Ut,alignment:Nt})=>{if(!at||!C.length||!h||!ut||!xt)return null;const K=(gt=>{const bt=gt.currentTarget.getBoundingClientRect(),S=gt.clientX-bt.left,Z=gt.clientY-bt.top,St=ut.computeAlignment(Ut,Nt,{minX:0,minY:0,maxX:bt.width,maxY:bt.height},xt.bounds);let wt=new ut.Mat2D;St.invert(wt);const zt=new ut.Vec2D(S,Z),ct=ut.mapXY(wt,zt),z=ct.x(),Pt=ct.y();switch(gt.type){case"mousemove":for(const o of C)o.pointerMove(z,Pt);break;case"mousedown":for(const o of C)o.pointerDown(z,Pt);break;case"mouseup":for(const o of C)o.pointerUp(z,Pt);break}}).bind(void 0);return at.addEventListener("mousemove",K),at.addEventListener("mousedown",K),at.addEventListener("mouseup",K),()=>{at.removeEventListener("mousemove",K),at.removeEventListener("mousedown",K),at.removeEventListener("mouseup",K)}}}],ye={};function tt(H){var Y=ye[H];if(Y!==void 0)return Y.exports;var N=ye[H]={exports:{}};return Se[H](N,N.exports,tt),N.exports}tt.d=(H,Y)=>{for(var N in Y)tt.o(Y,N)&&!tt.o(H,N)&&Object.defineProperty(H,N,{enumerable:!0,get:Y[N]})},tt.o=(H,Y)=>Object.prototype.hasOwnProperty.call(H,Y),tt.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var ge={};return(()=>{tt.r(ge),tt.d(ge,{Fit:()=>C,Alignment:()=>h,Layout:()=>ut,RuntimeLoader:()=>Ut,StateMachineInputType:()=>et,StateMachineInput:()=>K,EventType:()=>S,LoopType:()=>Z,Rive:()=>zt,Testing:()=>Pt});var H=tt(1),Y=tt(2),N=tt(3),Mt=function(o,n,a,p){function y(v){return v instanceof a?v:new a(function(w){w(v)})}return new(a||(a=Promise))(function(v,w){function U(W){try{T(p.next(W))}catch(G){w(G)}}function L(W){try{T(p.throw(W))}catch(G){w(G)}}function T(W){W.done?v(W.value):y(W.value).then(U,L)}T((p=p.apply(o,n||[])).next())})},at=function(o,n){var a={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},p,y,v,w;return w={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function U(T){return function(W){return L([T,W])}}function L(T){if(p)throw new TypeError("Generator is already executing.");for(;a;)try{if(p=1,y&&(v=T[0]&2?y.return:T[0]?y.throw||((v=y.return)&&v.call(y),0):y.next)&&!(v=v.call(y,T[1])).done)return v;switch(y=0,v&&(T=[T[0]&2,v.value]),T[0]){case 0:case 1:v=T;break;case 4:return a.label++,{value:T[1],done:!1};case 5:a.label++,y=T[1],T=[0];continue;case 7:T=a.ops.pop(),a.trys.pop();continue;default:if(v=a.trys,!(v=v.length>0&&v[v.length-1])&&(T[0]===6||T[0]===2)){a=0;continue}if(T[0]===3&&(!v||T[1]>v[0]&&T[1]<v[3])){a.label=T[1];break}if(T[0]===6&&a.label<v[1]){a.label=v[1],v=T;break}if(v&&a.label<v[2]){a.label=v[2],a.ops.push(T);break}v[2]&&a.ops.pop(),a.trys.pop();continue}T=n.call(o,a)}catch(W){T=[6,W],y=0}finally{p=v=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},xt;(function(o){o[o.Play=0]="Play",o[o.Pause=1]="Pause",o[o.Stop=2]="Stop"})(xt||(xt={}));var C;(function(o){o.Cover="cover",o.Contain="contain",o.Fill="fill",o.FitWidth="fitWidth",o.FitHeight="fitHeight",o.None="none",o.ScaleDown="scaleDown"})(C||(C={}));var h;(function(o){o.Center="center",o.TopLeft="topLeft",o.TopCenter="topCenter",o.TopRight="topRight",o.CenterLeft="centerLeft",o.CenterRight="centerRight",o.BottomLeft="bottomLeft",o.BottomCenter="bottomCenter",o.BottomRight="bottomRight"})(h||(h={}));var ut=function(){function o(n){var a,p,y,v,w,U;this.fit=(a=n==null?void 0:n.fit)!==null&&a!==void 0?a:C.Contain,this.alignment=(p=n==null?void 0:n.alignment)!==null&&p!==void 0?p:h.Center,this.minX=(y=n==null?void 0:n.minX)!==null&&y!==void 0?y:0,this.minY=(v=n==null?void 0:n.minY)!==null&&v!==void 0?v:0,this.maxX=(w=n==null?void 0:n.maxX)!==null&&w!==void 0?w:0,this.maxY=(U=n==null?void 0:n.maxY)!==null&&U!==void 0?U:0}return o.new=function(n){var a=n.fit,p=n.alignment,y=n.minX,v=n.minY,w=n.maxX,U=n.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new o({fit:a,alignment:p,minX:y,minY:v,maxX:w,maxY:U})},o.prototype.copyWith=function(n){var a=n.fit,p=n.alignment,y=n.minX,v=n.minY,w=n.maxX,U=n.maxY;return new o({fit:a!=null?a:this.fit,alignment:p!=null?p:this.alignment,minX:y!=null?y:this.minX,minY:v!=null?v:this.minY,maxX:w!=null?w:this.maxX,maxY:U!=null?U:this.maxY})},o.prototype.runtimeFit=function(n){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var a;return this.fit===C.Cover?a=n.Fit.cover:this.fit===C.Contain?a=n.Fit.contain:this.fit===C.Fill?a=n.Fit.fill:this.fit===C.FitWidth?a=n.Fit.fitWidth:this.fit===C.FitHeight?a=n.Fit.fitHeight:this.fit===C.ScaleDown?a=n.Fit.scaleDown:a=n.Fit.none,this.cachedRuntimeFit=a,a},o.prototype.runtimeAlignment=function(n){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var a;return this.alignment===h.TopLeft?a=n.Alignment.topLeft:this.alignment===h.TopCenter?a=n.Alignment.topCenter:this.alignment===h.TopRight?a=n.Alignment.topRight:this.alignment===h.CenterLeft?a=n.Alignment.centerLeft:this.alignment===h.CenterRight?a=n.Alignment.centerRight:this.alignment===h.BottomLeft?a=n.Alignment.bottomLeft:this.alignment===h.BottomCenter?a=n.Alignment.bottomCenter:this.alignment===h.BottomRight?a=n.Alignment.bottomRight:a=n.Alignment.center,this.cachedRuntimeAlignment=a,a},o}(),Ut=function(){function o(){}return o.loadRuntime=function(){H.default({locateFile:function(n){return o.wasmURL}}).then(function(n){var a;for(o.runtime=n;o.callBackQueue.length>0;)(a=o.callBackQueue.shift())===null||a===void 0||a(o.runtime)})},o.getInstance=function(n){o.isLoading||(o.isLoading=!0,o.loadRuntime()),o.runtime?n(o.runtime):o.callBackQueue.push(n)},o.awaitInstance=function(){return new Promise(function(n,a){return o.getInstance(function(p){return n(p)})})},o.setWasmUrl=function(n){o.wasmURL=n},o.isLoading=!1,o.callBackQueue=[],o.wasmURL="https://unpkg.com/"+Y.name+"@"+Y.version+"/rive.wasm",o}(),Nt=function(){function o(n,a,p,y){this.animation=n,this.artboard=a,this.playing=y,this.loopCount=0,this.scrubTo=null,this.instance=new p.LinearAnimationInstance(n,a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){return this.instance.time},set:function(n){this.instance.time=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.scrubTo===null?this.instance.advance(n):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},o.prototype.apply=function(n){this.instance.apply(n)},Object.defineProperty(o.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.instance.delete()},o}(),et;(function(o){o[o.Number=56]="Number",o[o.Trigger=58]="Trigger",o[o.Boolean=59]="Boolean"})(et||(et={}));var K=function(){function o(n,a){this.type=n,this.runtimeInput=a}return Object.defineProperty(o.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(n){this.runtimeInput.value=n},enumerable:!1,configurable:!0}),o.prototype.fire=function(){this.type===et.Trigger&&this.runtimeInput.fire()},o}(),gt=function(){function o(n,a,p,y){this.stateMachine=n,this.playing=p,this.artboard=y,this.inputs=[],this.instance=new a.StateMachineInstance(n,y),this.initInputs(a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"statesChanged",{get:function(){for(var n=[],a=0;a<this.instance.stateChangedCount();a++)n.push(this.instance.stateChangedNameByIndex(a));return n},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.instance.advance(n)},o.prototype.initInputs=function(n){for(var a=0;a<this.instance.inputCount();a++){var p=this.instance.input(a);this.inputs.push(this.mapRuntimeInput(p,n))}},o.prototype.mapRuntimeInput=function(n,a){if(n.type===a.SMIInput.bool)return new K(et.Boolean,n.asBool());if(n.type===a.SMIInput.number)return new K(et.Number,n.asNumber());if(n.type===a.SMIInput.trigger)return new K(et.Trigger,n.asTrigger())},o.prototype.cleanup=function(){this.instance.delete()},o}(),bt=function(){function o(n,a,p,y,v){y===void 0&&(y=[]),v===void 0&&(v=[]),this.runtime=n,this.artboard=a,this.eventManager=p,this.animations=y,this.stateMachines=v}return o.prototype.add=function(n,a,p){if(p===void 0&&(p=!0),n=z(n),n.length===0)this.animations.forEach(function(k){return k.playing=a}),this.stateMachines.forEach(function(k){return k.playing=a});else{var y=this.animations.map(function(k){return k.name}),v=this.stateMachines.map(function(k){return k.name});for(var w in n){var U=y.indexOf(n[w]),L=v.indexOf(n[w]);if(U>=0||L>=0)U>=0?this.animations[U].playing=a:this.stateMachines[L].playing=a;else{var T=this.artboard.animationByName(n[w]);if(T){var W=new Nt(T,this.artboard,this.runtime,a);W.advance(0),W.apply(1),this.animations.push(W)}else{var G=this.artboard.stateMachineByName(n[w]);if(G){var ot=new gt(G,this.runtime,a,this.artboard);this.stateMachines.push(ot)}}}}}return p&&(a?this.eventManager.fire({type:S.Play,data:this.playing}):this.eventManager.fire({type:S.Pause,data:this.paused})),a?this.playing:this.paused},o.prototype.play=function(n){return this.add(n,!0)},o.prototype.pause=function(n){return this.add(n,!1)},o.prototype.scrub=function(n,a){var p=this.animations.filter(function(y){return n.includes(y.name)});return p.forEach(function(y){return y.scrubTo=a}),p.map(function(y){return y.name})},Object.defineProperty(o.prototype,"playing",{get:function(){return this.animations.filter(function(n){return n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paused",{get:function(){return this.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),o.prototype.stop=function(n){var a=this;n=z(n);var p=[];if(n.length===0)p=this.animations.map(function(w){return w.name}).concat(this.stateMachines.map(function(w){return w.name})),this.animations.forEach(function(w){return w.cleanup()}),this.stateMachines.forEach(function(w){return w.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var y=this.animations.filter(function(w){return n.includes(w.name)});y.forEach(function(w){w.cleanup(),a.animations.splice(a.animations.indexOf(w),1)});var v=this.stateMachines.filter(function(w){return n.includes(w.name)});v.forEach(function(w){w.cleanup(),a.stateMachines.splice(a.stateMachines.indexOf(w),1)}),p=y.map(function(w){return w.name}).concat(v.map(function(w){return w.name}))}return this.eventManager.fire({type:S.Stop,data:p}),p},Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(n,a){return n||a.playing},!1)||this.stateMachines.reduce(function(n,a){return n||a.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),o.prototype.atLeastOne=function(n,a){a===void 0&&(a=!0);var p;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([p=this.artboard.animationByIndex(0).name],n,a):this.artboard.stateMachineCount()>0&&this.add([p=this.artboard.stateMachineByIndex(0).name],n,a)),p},o.prototype.handleLooping=function(){for(var n=0,a=this.animations.filter(function(y){return y.playing});n<a.length;n++){var p=a[n];p.loopValue===0&&p.loopCount?(p.loopCount=0,this.stop(p.name)):p.loopValue===1&&p.loopCount?(this.eventManager.fire({type:S.Loop,data:{animation:p.name,type:Z.Loop}}),p.loopCount=0):p.loopValue===2&&p.loopCount>1&&(this.eventManager.fire({type:S.Loop,data:{animation:p.name,type:Z.PingPong}}),p.loopCount=0)}},o.prototype.handleStateChanges=function(){for(var n=[],a=0,p=this.stateMachines.filter(function(v){return v.playing});a<p.length;a++){var y=p[a];n.push.apply(n,y.statesChanged)}n.length>0&&this.eventManager.fire({type:S.StateChange,data:n})},o}(),S;(function(o){o.Load="load",o.LoadError="loaderror",o.Play="play",o.Pause="pause",o.Stop="stop",o.Loop="loop",o.Draw="draw",o.StateChange="statechange"})(S||(S={}));var Z;(function(o){o.OneShot="oneshot",o.Loop="loop",o.PingPong="pingpong"})(Z||(Z={}));var St=function(){function o(n){n===void 0&&(n=[]),this.listeners=n}return o.prototype.getListeners=function(n){return this.listeners.filter(function(a){return a.type===n})},o.prototype.add=function(n){this.listeners.includes(n)||this.listeners.push(n)},o.prototype.remove=function(n){for(var a=0;a<this.listeners.length;a++){var p=this.listeners[a];if(p.type===n.type&&p.callback===n.callback){this.listeners.splice(a,1);break}}},o.prototype.removeAll=function(n){var a=this;n?this.listeners.filter(function(p){return p.type===n}).forEach(function(p){return a.remove(p)}):this.listeners.splice(0,this.listeners.length)},o.prototype.fire=function(n){var a=this.getListeners(n.type);a.forEach(function(p){return p.callback(n)})},o}(),wt=function(){function o(n){this.eventManager=n,this.queue=[]}return o.prototype.add=function(n){this.queue.push(n)},o.prototype.process=function(){for(;this.queue.length>0;){var n=this.queue.shift();n==null||n.action(),n!=null&&n.event&&this.eventManager.fire(n.event)}},o}(),zt=function(){function o(n){var a;this._updateLayout=!0,this.isRendererActive=!0,this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.renderSecondTimer=0,this.canvas=n.canvas,this.src=n.src,this.buffer=n.buffer,this.layout=(a=n.layout)!==null&&a!==void 0?a:new ut,this.eventManager=new St,n.onLoad&&this.on(S.Load,n.onLoad),n.onLoadError&&this.on(S.LoadError,n.onLoadError),n.onPlay&&this.on(S.Play,n.onPlay),n.onPause&&this.on(S.Pause,n.onPause),n.onStop&&this.on(S.Stop,n.onStop),n.onLoop&&this.on(S.Loop,n.onLoop),n.onStateChange&&this.on(S.StateChange,n.onStateChange),n.onload&&!n.onLoad&&this.on(S.Load,n.onload),n.onloaderror&&!n.onLoadError&&this.on(S.LoadError,n.onloaderror),n.onplay&&!n.onPlay&&this.on(S.Play,n.onplay),n.onpause&&!n.onPause&&this.on(S.Pause,n.onpause),n.onstop&&!n.onStop&&this.on(S.Stop,n.onstop),n.onloop&&!n.onLoop&&this.on(S.Loop,n.onloop),n.onstatechange&&!n.onStateChange&&this.on(S.StateChange,n.onstatechange),this.taskQueue=new wt(this.eventManager),this.init({src:this.src,buffer:this.buffer,autoplay:n.autoplay,animations:n.animations,stateMachines:n.stateMachines,artboard:n.artboard,useOffscreenRenderer:n.useOffscreenRenderer})}return o.new=function(n){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new o(n)},o.prototype.init=function(n){var a=this,p=n.src,y=n.buffer,v=n.animations,w=n.stateMachines,U=n.artboard,L=n.autoplay,T=L===void 0?!1:L,W=n.useOffscreenRenderer,G=W===void 0?!1:W;if(this.src=p,this.buffer=y,!this.src&&!this.buffer)throw new Error(o.missingErrorMessage);var ot=z(v),k=z(w);this.loaded=!1,this.readyForPlaying=!1,Ut.awaitInstance().then(function(dt){a.runtime=dt,a.renderer=a.runtime.makeRenderer(a.canvas,G),a.canvas.width||a.canvas.height||a.resizeDrawingSurfaceToCanvas(),a.initData(U,ot,k,T).then(function(){var nt=(a.animator.stateMachines||[]).filter(function(Ft){return Ft.playing}).map(function(Ft){return Ft.instance});a.eventCleanup=(0,N.registerTouchInteractions)({canvas:a.canvas,artboard:a.artboard,stateMachines:nt,renderer:a.renderer,rive:a.runtime,fit:a._layout.runtimeFit(a.runtime),alignment:a._layout.runtimeAlignment(a.runtime)})}).catch(function(nt){console.error(nt)})}).catch(function(dt){console.error(dt)})},o.prototype.initData=function(n,a,p,y){var v;return Mt(this,void 0,void 0,function(){var w,U,L;return at(this,function(T){switch(T.label){case 0:return this.src?(w=this,[4,ct(this.src)]):[3,2];case 1:w.buffer=T.sent(),T.label=2;case 2:return U=this,[4,this.runtime.load(new Uint8Array(this.buffer))];case 3:return U.file=T.sent(),this.file?(this.initArtboard(n,a,p,y),this.loaded=!0,this.eventManager.fire({type:S.Load,data:(v=this.src)!==null&&v!==void 0?v:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()]):(L="Problem loading file; may be corrupt!",console.warn(L),this.eventManager.fire({type:S.LoadError,data:L}),[2,Promise.reject(L)])}})})},o.prototype.initArtboard=function(n,a,p,y){var v=n?this.file.artboardByName(n):this.file.defaultArtboard();if(!v){console.warn("Invalid artboard name or no default artboard"),this.eventManager.fire({type:S.LoadError,data:"Invalid artboard name or no default artboard"});return}if(this.artboard=v,this.artboard.animationCount()<1)throw this.eventManager.fire({type:S.LoadError,data:"Artboard has no animations"}),"Artboard has no animations";this.animator=new bt(this.runtime,this.artboard,this.eventManager);var w;a.length>0||p.length>0?(w=a.concat(p),this.animator.add(w,y,!1)):w=[this.animator.atLeastOne(y,!1)],this.taskQueue.add({action:function(){},event:{type:y?S.Play:S.Pause,data:w}})},o.prototype.drawFrame=function(){this.startRendering()},o.prototype.draw=function(n,a){var p=performance.now();this.frameRequestId=null,this.lastRenderTime||(this.lastRenderTime=n),this.renderSecondTimer+=n-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,a==null||a());var y=(n-this.lastRenderTime)/1e3;this.lastRenderTime=n;for(var v=this.animator.animations.filter(function(nt){return nt.playing||nt.needsScrub}).sort(function(nt,Ft){return nt.needsScrub?-1:1}),w=0,U=v;w<U.length;w++){var L=U[w];L.advance(y),L.instance.didLoop&&(L.loopCount+=1),L.apply(1)}for(var T=this.animator.stateMachines.filter(function(nt){return nt.playing}),W=0,G=T;W<G.length;W++){var ot=G[W];ot.advance(y)}this.artboard.advance(y);var k=this.renderer;k.clear(),k.save(),this.alignRenderer(),this.artboard.draw(k),k.restore(),k.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.frameCount++;var dt=performance.now();for(this.frameTimes.push(dt),this.durations.push(dt-p);this.frameTimes[0]<=dt-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},o.prototype.alignRenderer=function(){var n=this,a=n.renderer,p=n.runtime,y=n._layout,v=n.artboard;a.align(y.runtimeFit(p),y.runtimeAlignment(p),{minX:y.minX,minY:y.minY,maxX:y.maxX,maxY:y.maxY},v.bounds)},Object.defineProperty(o.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(n,a){return n+a},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.stopRendering(),this.cleanupInstances(),this.renderer.delete(),this.file.delete()},o.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},o.prototype.play=function(n,a){var p=this;if(n=z(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return p.play(n,a)}});return}this.animator.play(n),this.startRendering()},o.prototype.pause=function(n){var a=this;if(n=z(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.pause(n)}});return}this.animator.pause(n)},o.prototype.scrub=function(n,a){var p=this;if(n=z(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return p.scrub(n,a)}});return}this.animator.scrub(n,a||0),this.drawFrame()},o.prototype.stop=function(n){var a=this;if(n=z(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.stop(n)}});return}this.animator.stop(n)},o.prototype.reset=function(n){var a,p=z(n==null?void 0:n.animations),y=z(n==null?void 0:n.stateMachines);this.cleanupInstances(),this.initArtboard(n==null?void 0:n.artboard,p,y,(a=n==null?void 0:n.autoplay)!==null&&a!==void 0?a:!1),this.taskQueue.process()},o.prototype.load=function(n){this.stop(),this.init(n)},Object.defineProperty(o.prototype,"layout",{get:function(){return this._layout},set:function(n){this._layout=n,(!n.maxX||!n.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),o.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},o.prototype.resizeDrawingSurfaceToCanvas=function(){if(this.canvas instanceof HTMLCanvasElement&&!!window){var n=this.canvas.getBoundingClientRect(),a=n.width,p=n.height,y=window.devicePixelRatio||1;this.canvas.width=y*a,this.canvas.height=y*p,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(o.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"animationNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.animationCount();a++)n.push(this.artboard.animationByIndex(a).name);return n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stateMachineNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.stateMachineCount();a++)n.push(this.artboard.stateMachineByIndex(a).name);return n},enumerable:!1,configurable:!0}),o.prototype.stateMachineInputs=function(n){if(!!this.loaded){var a=this.animator.stateMachines.find(function(p){return p.name===n});return a==null?void 0:a.inputs}},Object.defineProperty(o.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),o.prototype.on=function(n,a){this.eventManager.add({type:n,callback:a})},o.prototype.unsubscribe=function(n,a){this.eventManager.remove({type:n,callback:a})},o.prototype.unsubscribeAll=function(n){this.eventManager.removeAll(n)},o.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},o.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},o.prototype.enableFPSCounter=function(n){this.runtime.enableFPSCounter(n)},o.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(o.prototype,"contents",{get:function(){if(!!this.loaded){for(var n={artboards:[]},a=0;a<this.file.artboardCount();a++){for(var p=this.file.artboardByIndex(a),y={name:p.name,animations:[],stateMachines:[]},v=0;v<p.animationCount();v++){var w=p.animationByIndex(v);y.animations.push(w.name)}for(var U=0;U<p.stateMachineCount();U++){for(var L=p.stateMachineByIndex(U),T=L.name,W=new this.runtime.StateMachineInstance(L,p),G=[],ot=0;ot<W.inputCount();ot++){var k=W.input(ot);G.push({name:k.name,type:k.type})}y.stateMachines.push({name:T,inputs:G})}n.artboards.push(y)}return n}},enumerable:!1,configurable:!0}),o.missingErrorMessage="Rive source file or data buffer required",o}(),ct=function(o){return Mt(void 0,void 0,void 0,function(){var n,a,p;return at(this,function(y){switch(y.label){case 0:return n=new Request(o),[4,fetch(n)];case 1:return a=y.sent(),[4,a.arrayBuffer()];case 2:return p=y.sent(),[2,p]}})})},z=function(o){return typeof o=="string"?[o]:o instanceof Array?o:[]},Pt={EventManager:St,TaskQueueManager:wt}})(),ge})()})})(en);const jn=On(en.exports),In=Rn(Cn(()=>Mn(()=>import("./q-5063fecd.js"),["build/q-5063fecd.js","build/q-1f5e9d60.js","build/q-0ea8883c.css"]),"s_Y0E0cKG5AaY")),Ln=()=>{const yt=xn({src:"https://cdn.rive.app/animations/vehicles.riv"});return ve("div",{class:"center",children:[ve("h1",{"text-align":"center",children:["Welcome to Qwik Rive Demo ",ve("span",{class:"lightning",children:"\u26A1\uFE0F"})]}),ve(In,{options:yt,[Un]:{options:!0}})]})},Dn=Object.freeze(Object.defineProperty({__proto__:null,s_vSDyd3awGHQ:Ln},Symbol.toStringTag,{value:"Module"}));export{Dn as e,jn as r};
